# Overview

The data in this directory is generated by

1. Submitting data from forms in test env
2. Open CDP terminal for test env
3. Logging into mongo shell and export data from relevant collection e.g.
   `print(EJSON.stringify(db.organisation.findOne({orgId:503152}, null, 2)))`

They are meant to be used for developing and testing parsing of data submitted through forms.

## Test env form urls

- [Organisation details](https://forms-runner.test.cdp-int.defra.cloud/form/preview/draft/demo-for-pepr-extended-producer-responsibilities-provide-your-organisation-details-ea/form-guidance)
- [Exporter registration](https://forms-runner.test.cdp-int.defra.cloud/form/preview/draft/demo-for-pepr-extended-producer-responsibilities-register-as-a-packaging-waste-exporter-ea/form-guidance)
- [Reprocessor registration](https://forms-runner.test.cdp-int.defra.cloud/form/preview/draft/demo-for-pepr-extended-producer-responsibilities-register-as-a-packaging-waste-reprocessor-ea/form-guidance)
- [Exporter accreditation](https://forms-runner.test.cdp-int.defra.cloud/form/preview/draft/demo-for-pepr-extended-producer-responsibilities-apply-for-accreditation-as-a-packaging-waste-exporter-ea/form-guidance)
- [Reprocessor accreditation](https://forms-runner.test.cdp-int.defra.cloud/form/preview/draft/demo-for-pepr-extended-producer-responsibilities-apply-for-accreditation-as-a-packaging-waste-reprocessor-ea/form-guidance)

## Syncing test env with production form definitions

Forms are defined and maintained in DEFRA Forms Designer. Once deployed, users can submit data through these forms. Test data fixtures in this directory are actual submissions from these forms.

**Key findings:**

- No differences found between regional versions (EA/NRW/SEPA/NIEA) in production
- Differences existed between TEST and PROD EA forms (fixed on 2025-10-08)

**Last synced:** TEST env form definitions were synced with production on `2025-10-08`

### How to sync form definitions from production to test

**Note:** Form definitions are JSON files that define form structure/questions, NOT the test fixture data (user submissions).

1. Download form definition JSON files from [production DEFRA Forms Designer](https://forms-designer.prod.cdp-int.defra.cloud/library?sort=updatedDesc&title=PEPR&author=all) for EA forms
2. `cd src/data/prod-form-definitions/`
3. Copy downloaded JSON files in `src/data/prod-form-definitions/ea`
4. Run the script: `./update-defra-prod-forms.sh ea`
5. If successful, [upload the updated files to TEST env](https://forms-designer.test.cdp-int.defra.cloud/library?sort=updatedDesc&title=PEPR&author=all)

> [!WARNING]
> Never upload production JSON files directly to test without URL replacement. They will submit data to the production epr-backend API.

### Test data fixtures

### Organisation

| Test data                                                       | description                                                              |
| --------------------------------------------------------------- | ------------------------------------------------------------------------ |
| [503176](./organisation/registered-ltd-liability.json)          | UK registered ltd liability company                                      |
| [503177](./organisation/registered-ltd-partnership.json)        | UK registered ltd partnership company                                    |
| [503179](./organisation/registered-no-partnership.json)         | UK registered non partnership company                                    |
| [503180](./organisation/non-registered-uk-sole-trader.json)     | UK non-registered sole trader, person applying not in control of company |
| [503181](./organisation/non-registered-outside-uk-address.json) | UK non-registered organisation with non-UK main address                  |
| [503286](./organisation/unincorporated-separate-control.json)   | UK unincorporated association with separate management contact           |
| [503287](./organisation/sole-trader-separate-contro.json)       | UK sole trader with separate management contact                          |
| [503288](./organisation/non-uk-separate-control.json)           | Non-UK organisation with separate management contact                     |

### Registration

| Test data                                               | description                                                          |
| ------------------------------------------------------- | -------------------------------------------------------------------- |
| [503176](./registration/reprocessor-all-materials.json) | Reprocessor registration for a site that can process all 7 materials |
| [503181](./registration/exporter.json)                  | Exporter registration for Glass                                      |

### Accreditation

| Test data                                                    | description                                                                                                                                                |
| ------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [503176](./accreditation/reprocessor-paper.json)             | Reprocessor accreditation for Paper                                                                                                                        |
| [503176](./accreditation/reprocessor-wood.json)              | Reprocessor accreditation for wood with first line of address not same as registration. "78 Portland Place" during registration vs 78 during accreditation |
| [503177](./accreditation/exporter-without-registration.json) | Exporter accreditation for glass without registration                                                                                                      |
| [503181](./accreditation/exporter.json)                      | Exporter accreditation for glass                                                                                                                           |
